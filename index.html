<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viral Script Architect v6.0 - Pro UI</title>
    <style>
        :root { --yt-red: #ff0000; --bg: #0d0d0d; --card: #1a1a1a; --text: #f0f0f0; --accent: #00e676; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); padding: 20px; line-height: 1.6; }
        .container { max-width: 900px; margin: auto; background: var(--card); border-radius: 15px; padding: 30px; border: 1px solid #333; }
        
        /* Flashing Animation for Text */
        @keyframes flash {
            0%, 100% { opacity: 1; color: var(--accent); }
            50% { opacity: 0.3; color: #fff; }
        }
        .flashing-text { font-weight: bold; font-size: 18px; animation: flash 1.5s infinite; margin-bottom: 10px; }

        /* Progress Bar Styles */
        #progress-container { display: none; width: 100%; background: #000; border: 1px solid #444; border-radius: 20px; height: 30px; margin: 20px 0; overflow: hidden; position: relative; }
        #progress-bar { width: 0%; height: 100%; background: linear-gradient(90deg, #ff0000, #ff4d4d); transition: width 0.4s ease; border-radius: 20px; }
        #progress-text { position: absolute; width: 100%; text-align: center; top: 3px; font-weight: bold; font-size: 14px; color: #fff; text-shadow: 1px 1px 2px #000; }

        label { display: block; margin-top: 15px; font-size: 11px; color: #888; text-transform: uppercase; font-weight: bold; }
        input, textarea, select { width: 100%; padding: 12px; background: #000; border: 1px solid #444; border-radius: 8px; color: #fff; margin-top: 5px; box-sizing: border-box; }
        
        .btn { background: var(--yt-red); color: #fff; border: none; padding: 18px; width: 100%; border-radius: 10px; font-size: 16px; font-weight: 800; cursor: pointer; margin-top: 25px; }
        .btn:hover { background: #cc0000; }

        #output { background: #000; padding: 25px; border-radius: 12px; border: 1px solid #444; min-height: 300px; white-space: pre-wrap; margin-top: 20px; display: none; }
        .error-log { color: #ff4444; font-size: 13px; margin-top: 15px; display: none; background: #221111; padding: 15px; border-radius: 8px; border: 1px solid #441111; }
    </style>
</head>
<body>

<div class="container">
    <h1 style="text-align: center; margin-bottom: 5px;">Script Architect Pro</h1>
    <p style="text-align: center; font-size: 12px; color: #666; margin-bottom: 25px;">2.5 FLASH-LITE ENGINE</p>

    <label>Enter your Key here...</label>
    <input type="password" id="apiKey" placeholder="Paste your key...">

    <div style="display: flex; gap: 20px;">
        <div style="flex:1">
            <label>Language</label>
            <select id="lang">
                <option value="Hinglish (Mumbai/Delhi slang mix)">Hinglish</option>
                <option value="Simple day-to-day Marathi (Conversational)">Simple Marathi</option>
                <option value="Easy day-to-day Hindi">Simple Hindi</option>
                <option value="English">English</option>
            </select>
        </div>
        <div style="flex:1">
            <label>Duration</label>
            <select id="duration">
                <option value="5 min">5 Min</option>
                <option value="10 min">10 Min</option>
                <option value="15 min">15 Min</option>
                <option value="20 min">20 Min</option>
                <option value="30 min">30 Min</option>
            </select>
        </div>
    </div>

    <label>Topic</label>
    <input type="text" id="topic" placeholder="e.g. Ranveer Singh's Dhurandhar Movie Details">

    <label>Details</label>
    <textarea id="notes" rows="3" placeholder="Add specific cast/plot details here..."></textarea>

    <button class="btn" onclick="generateScript()">ARCHITECT VIRAL SCRIPT</button>

    <div id="loading-area" style="display: none; text-align: center; margin-top: 30px;">
        <div class="flashing-text">ARCHITECTING YOUR VIRAL SCRIPT...</div>
        <div id="progress-container">
            <div id="progress-bar"></div>
            <div id="progress-text">0%</div>
        </div>
    </div>

    <div id="errorLog" class="error-log"></div>
    <div id="output"></div>
</div>

<script>
    async function generateScript() {
        const key = document.getElementById('apiKey').value.trim();
        const topic = document.getElementById('topic').value;
        const lang = document.getElementById('lang').value;
        const dur = document.getElementById('duration').value;
        const notes = document.getElementById('notes').value;
        
        const loadingArea = document.getElementById('loading-area');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const output = document.getElementById('output');
        const errorLog = document.getElementById('errorLog');

        if (!key || !topic) return alert("API Key and Topic are required!");

        // Show Loading UI
        loadingArea.style.display = "block";
        output.style.display = "none";
        errorLog.style.display = "none";
        
        // Progress Bar Simulation Logic
        let progress = 0;
        progressBar.style.width = "0%";
        progressText.innerText = "0%";
        
        const interval = setInterval(() => {
            if (progress < 90) {
                progress += Math.random() * 5; 
                if (progress > 90) progress = 90;
                progressBar.style.width = progress + "%";
                progressText.innerText = Math.floor(progress) + "%";
            }
        }, 800);

        try {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-lite:generateContent?key=${key}`;
            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: `Write a high-retention ${dur} YouTube script for the topic "${topic}" in ${lang}. Specific details to include: ${notes}. Ensure the tone is engaging and suitable for social media. Include bracketed [Visuals/Camera Cues] for the editor.` }] }]
                })
            });

            const data = await response.json();
            clearInterval(interval);

            if (data.candidates && data.candidates[0].content) {
                progressBar.style.width = "100%";
                progressText.innerText = "100% COMPLETE";
                
                setTimeout(() => {
                    loadingArea.style.display = "none";
                    output.innerText = data.candidates[0].content.parts[0].text;
                    output.style.display = "block";
                }, 500);
            } else {
                loadingArea.style.display = "none";
                errorLog.innerText = "API Error: " + (data.error?.message || "Check your API Key or Quota.");
                errorLog.style.display = "block";
            }
        } catch (err) {
            clearInterval(interval);
            loadingArea.style.display = "none";
            errorLog.innerText = "Fetch Error: " + err.message;
            errorLog.style.display = "block";
        }
    }
</script>

</body>
</html>
